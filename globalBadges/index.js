(function(i,l,b){"use strict";const u=window.bunny.api.react.jsx,n=new Map,g=1e3*60*30,h=l.findByName("useBadges",!1);let f,c;var m={onLoad:function(){const s={};u.onJsxCreate("ProfileBadge",function(a,e){if(e.props.id?.startsWith("gb-")){const t=s[e.props.id];t&&(e.props.source=t.source,e.props.label=t.label,e.props.id=t.id)}}),u.onJsxCreate("RenderBadge",function(a,e){if(e.props.id?.startsWith("gb-")){const t=s[e.props.id];t&&Object.assign(e.props,t)}}),f=b.after("default",h,function([a],e){if(a===null)return;if(c=n.get(a.userId),c===void 0){w(a.userId);return}const t=function(o){e.push(o)};Object.entries(c.badges).forEach(function([o,p]){let r=`gb-${o}`;switch(o){case"customBadgesArray":p&&p.badges.forEach(function(d){r=`gb-${o}-${d.name}`,s[r]={id:r,source:{uri:d.badge},label:d.name,userId:a.userId},t({id:r,description:d.name,icon:"dummy"})})}})})},onUnload:function(){f?.()}};async function w(s){if(!n.has(s)||n.get(s).lastFetch+g<Date.now()){const a=await fetch(`https://api.obamabot.me/v2/text/badges?user=${s}`),e=await a.json(),t=a.status===200||a.status===404?{badges:e||{},lastFetch:Date.now()}:(n.delete(s),{badges:e,lastFetch:Date.now()});n.set(s,t)}return n.get(s).badges}return i.default=m,Object.defineProperty(i,"__esModule",{value:!0}),i})({},vendetta.metro,vendetta.patcher);
